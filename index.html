<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="index.css">
</head>
  <body class="bg-black">
    <div class="container ">
        <div class="row text-center mt-3">
            <div class="col-12">
                <h1 class="text-light gradient-text"> Save Succinct Pepe</h1>
            </div>
        </div>
        <div class="row text-center mt-3">
            <div class="col-12">
                <img src="banner.png">
            </div>
        </div>

        
        <!--row1-->
        <div class="row mt-3 mx-md-5 mx-sm-0">
            <div class="col-2"></div>
            <div class="col-md-2 col-sm-12">
                <h5 class="text-light">1. Connect Wallet</h5>
            </div>
            <div class="col-md-6 col-sm-12">
                <hr class="text-white" />
            </div>
            <div class="col-2"></div>
        </div>
        <!--row2-->
        <div class="row mt-3 mx-md-5 mx-sm-0">
            <div class="col-2"></div>
            <div class="col-md-8 col-sm-12">
                <button class="btn btn-primary" id="walletConnect">Connect</button>
            </div>
            <div class="col-2"></div>
            
            <div class="col-2"></div>
            <div class="col-md-8 col-sm-12 pt-4">
                <h5 class="text-light">Wallet Address: </h5> <span class="text-white" id="walletAddress"></span>
                <h6 class="text-light">You can play just once time!</h6>
            </div>
        </div>
        <!--row3-->
        <div class="row mt-4 mx-md-5 mx-sm-0">
            <div class="col-2"></div>
            <div class="col-md-2 col-sm-12">
                <h5 class="text-light">2. Set Revolver</h5>
            </div>
            <div class="col-md-6 col-sm-12">
                <hr class="text-white" />
            </div>
            <div class="col-2"></div>
        </div>
        <div class="row mt-3 mx-md-5 mx-sm-0">
            <div class="col-2"></div>
            <div class="col-md-3 col-sm-12">
                <span class="text-28 text-light ">Win Chance: </span> <span class="text-white text-28" id="chance"></span>
            </div>
            <div class="col-md-2 col-sm-12">
                <span class="text-28 text-light ">Price: </span> <span class="text-white text-28" id="price"></span><span class="text-white text-28">üí≤</span>
            </div>
            <div class="col-md-4 col-sm-12">
                <span class="text-28 text-light ">Get: </span> <span class="text-white text-28" id="stars"></span><span class="text-white text-28">‚≠ê</span>
            </div>
            <div class="col-2"></div>
        </div>
        
        <div class="row mt-3 mx-md-5 mx-sm-0">
            <div class="col-2"></div>
            <div class="col-md-4 col-sm-12">
                <label for="customRange3" class="form-label text-light">Empty Chamber</label>
                <input type="range" class="form-range" min="1" max="5" step="1" value="1" id="customRange3">
            </div>
            <div class="col-1"></div>
            <div class="col-md-4 col-sm-12">
                <img id="chamberImage" class="mt-5" src="1.png">
            </div>
            <div class="col-1"></div>
            
        </div>

            
        <div class="row mt-5 mx-md-5 mx-sm-0">
            <div class="col-2"></div>
            <div class="col-md-4 col-sm-12">
                <button class="btn btn-primary d-none" id="spinButton">Pay & Pull Trigger</button>
                
            </div>

            <div class="col-md-4 col-sm-12">
                <spin class="text-white" id="result"></spin>                
            </div>
          
            <div class="col-2"></div>
            <br>
            <br>
            <br>
            <hr>
        </div>

        <div class="row mt-3 mx-md-5 mx-sm-0">
            <div class="col-2"></div>
            <div class="col-md-2 col-sm-12">
                <h5 class="text-light" >3. Share on X</h5>
            </div>
            <div class="col-md-6 col-sm-12">
                <hr class="text-white" />
            </div>
            <div class="col-2"></div>
        </div>
        <div class="row mt-3 mx-md-5 mx-sm-0">
            <div class="col-2"></div>
            <div class="col-md-2 col-sm-12">
                <button class="btn btn-primary" id="shareOnX">Share on X</button>
            </div>
            <div class="col-6">
            </div>
            <div class="col-2"></div>
        </div>
        <br>
        <div class="row mt-3 mx-md-5 mx-sm-12">
            <div class="col-2"></div>
            <div class="col-md-2 col-sm-12">
                <h5 class="text-light">Contact</h5>
            </div>
            <div class="col-md-6 col-sm-12">
                <hr class="text-white" />
            </div>
            <div class="col-2"></div>
        </div>
        <div class="row mt-3 mx-md-5 mx-sm-0">
            <div class="col-2"></div>
            <div class="col-md-2 col-sm-12">
                <h5 class="text-light">@orbit_dev</h5>
            </div>
            <div class="col-6">
            </div>
            <div class="col-2"></div>
        </div>
        <br>
        <br>
        <br>
    </div>
    <audio id="gunShotSound" src="gun-shot.mp3"></audio>
    <audio id="gunTriggerSound" src="gun-trig.mp3"></audio>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <script>
   document.addEventListener("DOMContentLoaded", function () {
            const rangeInput = document.getElementById("customRange3");
            const chanceDisplay = document.getElementById("chance");
            const priceDisplay = document.getElementById("price");
            const starsDisplay = document.getElementById("stars");
            const imageDisplay = document.getElementById("chamberImage");
            const walletAddressElement = document.getElementById("walletAddress");
            const walletConnectButton = document.getElementById("walletConnect");
            const spinButton = document.getElementById("spinButton");
            const resultDisplay = document.getElementById("result");

            let isConnected = false;
            let interval = null;

            // üéØ C√ºzdan Baƒülantƒ±sƒ±
            walletConnectButton.addEventListener("click", async () => {
                if (typeof window.ethereum !== "undefined") {
                    try {
                        const accounts = await window.ethereum.request({ method: "eth_requestAccounts" });
                        const account = accounts[0];
                        walletAddressElement.innerText = account;
                        isConnected = true;
                        spinButton.classList.remove("d-none");
                        spinButton.classList.add("d-initial");
                    } catch (error) {
                        console.error("User denied account access:", error);
                        isConnected = false;
                    }
                } else {
                    walletAddressElement.innerText = "MetaMask not installed.";
                }
            });

            const values = {
                1: { chance: 16, price: "1", stars: "25", image: "1.png" },
                2: { chance: 33, price: "2", stars: "20", image: "2.png" },
                3: { chance: 50, price: "3", stars: "15", image: "3.png" },
                4: { chance: 66, price: "4", stars: "10", image: "4.png" },
                5: { chance: 83, price: "5", stars: "5", image: "5.png" }
            };

            function updateValues() {
                const value = rangeInput.value;
                chanceDisplay.textContent = values[value].chance + "%";
                priceDisplay.textContent = values[value].price;
                starsDisplay.textContent = values[value].stars;
                imageDisplay.src = values[value].image;
            }

            rangeInput.addEventListener("input", updateValues);
            updateValues();

            
            spinButton.addEventListener("click", function() {
                if (!isConnected) {
                    resultDisplay.innerHTML = "‚ö†Ô∏è Please connect your wallet first!";
                    return;
                }
                resultDisplay.innerHTML = "";
                let value = rangeInput.value;
                let winChance = values[value].chance;

                let random = Math.random() * 100; 
                let angle = 0;
                let speed = 20;

                if (interval) {
                    clearInterval(interval);
                }

                interval = setInterval(function() {
                    angle += speed;
                    imageDisplay.style.transform = `rotate(${angle}deg)`;
                    if (speed > 0.5) {
                        speed *= 0.95;
                    } else {
                        clearInterval(interval);
                        interval = null;

                        if (random <= winChance) {
                            document.getElementById("gunTriggerSound").play();

                            resultDisplay.innerHTML = "üéâ You Win! + " + values[value].stars + " ‚≠ê";
                        } else {
                            document.getElementById("gunShotSound").play();
                            resultDisplay.innerHTML = "üíÄ You Lost!";
                        }
                    }
                }, 50);
            });

            document.getElementById("shareOnX").addEventListener("click", function() {
                const text = encodeURIComponent("üíÄ I just took my shot in 'Save Succinct Pepe'! üéØüî´ Will I survive or will luck betray me? Try your luck now! üöÄüî•");
                const url = encodeURIComponent("save-succinct-pepe.web.app"); 
                const hashtags = "SaveSuccinctPepe,CryptoGame,Blockchain,LuckyShot";

                const twitterShareUrl = `https://twitter.com/intent/tweet?text=${text}&url=${url}&hashtags=${hashtags}`;
                window.open(twitterShareUrl, "_blank");
            });
        });
    </script>
</body>
</html>